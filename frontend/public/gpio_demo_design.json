{
  "design_metadata": {
    "name": "gpio_demo_top",
    "version": "1.0",
    "description": "GPIO Demo Design with Multi-level Hierarchy",
    "top_module": "gpio_demo_top",
    "created_time": "2025-06-23T10:00:00Z",
    "total_modules": 6,
    "total_instances": 5,
    "max_hierarchy_depth": 2
  },

  "signal_netlist": {
    "nets": {
      "net_sys_clk": {
        "name": "sys_clk", 
        "width": 1,
        "type": "wire",
        "driver": {
          "module": "TOP_PORT", 
          "port": "sys_clk",
          "instance": null
        },
        "loads": [
          {
            "module": "clk_generator",
            "instance": "u_clk_gen", 
            "port": "clk_in"
          }
        ],
        "net_class": "clock",
        "routing_style": "clock_tree"
      },
      
      "net_clk_out": {
        "name": "clk_out",
        "width": 1, 
        "type": "wire",
        "driver": {
          "module": "clk_generator",
          "instance": "u_clk_gen",
          "port": "clk_out"
        },
        "loads": [
          {
            "module": "ahb_to_apb_bridge", 
            "instance": "u_ahb_apb_bridge",
            "port": "hclk"
          },
          {
            "module": "cmsdk_iop_gpio",
            "instance": "u_gpio_ctrl", 
            "port": "HCLK"
          },
          {
            "module": "interrupt_controller",
            "instance": "u_irq_ctrl",
            "port": "clk"
          },
          {
            "module": "led_driver",
            "instance": "u_led_driver",
            "port": "clk"
          }
        ],
        "net_class": "clock",
        "routing_style": "clock_tree"
      },

      "net_ahb_bus": {
        "name": "ahb_bus",
        "width": 32,
        "type": "wire_bus", 
        "driver": {
          "module": "TOP_PORT",
          "port": "ahb_haddr", 
          "instance": null
        },
        "loads": [
          {
            "module": "ahb_to_apb_bridge",
            "instance": "u_ahb_apb_bridge",
            "port": "haddr"
          }
        ],
        "net_class": "bus",
        "routing_style": "bus",
        "bus_signals": [
          {"bit_range": "[31:0]", "signal": "ahb_haddr"},
          {"bit_range": "[1:0]", "signal": "ahb_htrans"}, 
          {"bit_range": "[2:0]", "signal": "ahb_hsize"}
        ]
      },

      "net_apb_bus": {
        "name": "apb_bus", 
        "width": 32,
        "type": "wire_bus",
        "driver": {
          "module": "ahb_to_apb_bridge",
          "instance": "u_ahb_apb_bridge", 
          "port": "paddr"
        },
        "loads": [
          {
            "module": "cmsdk_iop_gpio",
            "instance": "u_gpio_ctrl",
            "port": "i_IOADDR"
          }
        ],
        "net_class": "bus", 
        "routing_style": "bus"
      },

      "net_gpio_irq": {
        "name": "gpio_interrupt",
        "width": 16,
        "type": "wire",
        "driver": {
          "module": "cmsdk_iop_gpio",
          "instance": "u_gpio_ctrl",
          "port": "GPIOINT"
        },
        "loads": [
          {
            "module": "interrupt_controller", 
            "instance": "u_irq_ctrl",
            "port": "irq_in"
          }
        ],
        "net_class": "interrupt",
        "routing_style": "point_to_point"
      },

      "net_gpio_data": {
        "name": "gpio_output_data",
        "width": 8, 
        "type": "wire",
        "driver": {
          "module": "cmsdk_iop_gpio",
          "instance": "u_gpio_ctrl",
          "port": "PORTOUT",
          "bit_slice": "[7:0]"
        },
        "loads": [
          {
            "module": "led_driver",
            "instance": "u_led_driver", 
            "port": "gpio_data"
          }
        ],
        "net_class": "data",
        "routing_style": "point_to_point"
      }
    }
  },

  "module_library": {
    "gpio_demo_top": {
      "module_type": "top_level",
      "ports": [
        {"name": "sys_clk", "direction": "input", "width": 1, "type": "clock"},
        {"name": "sys_rst_n", "direction": "input", "width": 1, "type": "reset"},
        {"name": "ahb_haddr", "direction": "input", "width": 32, "type": "address"},
        {"name": "ahb_htrans", "direction": "input", "width": 2, "type": "control"},
        {"name": "ahb_hwrite", "direction": "input", "width": 1, "type": "control"},
        {"name": "ahb_hsize", "direction": "input", "width": 3, "type": "control"},
        {"name": "ahb_hwdata", "direction": "input", "width": 32, "type": "data"},
        {"name": "ahb_hsel", "direction": "input", "width": 1, "type": "control"},
        {"name": "gpio_pins", "direction": "inout", "width": 16, "type": "gpio"},
        {"name": "ahb_hrdata", "direction": "output", "width": 32, "type": "data"},
        {"name": "ahb_hready", "direction": "output", "width": 1, "type": "control"},
        {"name": "ahb_hresp", "direction": "output", "width": 1, "type": "control"},
        {"name": "led_display", "direction": "output", "width": 8, "type": "display"},
        {"name": "system_irq", "direction": "output", "width": 1, "type": "interrupt"}
      ],
      "parameters": [
        {"name": "AHB_ADDR_WIDTH", "value": "32", "type": "integer"},
        {"name": "GPIO_WIDTH", "value": "16", "type": "integer"}
      ],
      "internal_structure": {
        "instances": [
          {
            "name": "u_clk_gen",
            "module_type": "clk_generator", 
            "parameter_overrides": [
              {"name": "FREQ_HZ", "value": "100000000"}
            ]
          },
          {
            "name": "u_ahb_apb_bridge", 
            "module_type": "ahb_to_apb_bridge",
            "parameter_overrides": []
          },
          {
            "name": "u_gpio_ctrl",
            "module_type": "cmsdk_iop_gpio",
            "parameter_overrides": [
              {"name": "GPIO_WIDTH", "value": "16"}
            ]
          },
          {
            "name": "u_irq_ctrl",
            "module_type": "interrupt_controller", 
            "parameter_overrides": []
          },
          {
            "name": "u_led_driver",
            "module_type": "led_driver",
            "parameter_overrides": []
          }
        ],
        "port_connections": [
          {
            "net": "net_sys_clk",
            "connections": [
              {"type": "port", "name": "sys_clk"},
              {"type": "instance_port", "instance": "u_clk_gen", "port": "clk_in"}
            ]
          },
          {
            "net": "net_clk_out", 
            "connections": [
              {"type": "instance_port", "instance": "u_clk_gen", "port": "clk_out"},
              {"type": "instance_port", "instance": "u_ahb_apb_bridge", "port": "hclk"},
              {"type": "instance_port", "instance": "u_gpio_ctrl", "port": "HCLK"},
              {"type": "instance_port", "instance": "u_irq_ctrl", "port": "clk"},
              {"type": "instance_port", "instance": "u_led_driver", "port": "clk"}
            ]
          }
        ]
      }
    },

    "clk_generator": {
      "module_type": "utility",
      "ports": [
        {"name": "clk_in", "direction": "input", "width": 1, "type": "clock"},
        {"name": "rst_n", "direction": "input", "width": 1, "type": "reset"},
        {"name": "clk_out", "direction": "output", "width": 1, "type": "clock"},
        {"name": "clk_div2", "direction": "output", "width": 1, "type": "clock"}
      ],
      "parameters": [
        {"name": "FREQ_HZ", "value": "100000000", "type": "integer"}
      ],
      "internal_structure": {
        "instances": [],
        "internal_nets": [
          {"name": "div_counter", "width": 8, "type": "reg"}
        ],
        "port_connections": []
      }
    }
  },

  "schematic_views": {
    "gpio_demo_top": {
      "view_type": "schematic",
      "symbols": [
        {
          "id": "sym_clk_gen",
          "instance_name": "u_clk_gen",
          "module_type": "clk_generator",
          "position": {"x": 100, "y": 200},
          "size": {"width": 120, "height": 80},
          "orientation": "normal",
          "symbol_style": "rectangular",
          "port_positions": {
            "clk_in": {"side": "left", "offset": 20},
            "rst_n": {"side": "left", "offset": 40}, 
            "clk_out": {"side": "right", "offset": 20},
            "clk_div2": {"side": "right", "offset": 40}
          }
        },
        {
          "id": "sym_bridge",
          "instance_name": "u_ahb_apb_bridge",
          "module_type": "ahb_to_apb_bridge", 
          "position": {"x": 300, "y": 150},
          "size": {"width": 160, "height": 180},
          "orientation": "normal",
          "symbol_style": "rectangular",
          "port_positions": {
            "hclk": {"side": "top", "offset": 20},
            "hresetn": {"side": "top", "offset": 40},
            "haddr": {"side": "left", "offset": 30, "bus": true},
            "htrans": {"side": "left", "offset": 50, "bus": true},
            "hwrite": {"side": "left", "offset": 70},
            "hsize": {"side": "left", "offset": 90, "bus": true},
            "hwdata": {"side": "left", "offset": 110, "bus": true},
            "hsel": {"side": "left", "offset": 130},
            "hrdata": {"side": "left", "offset": 150, "bus": true},
            "hready": {"side": "left", "offset": 170},
            "hresp": {"side": "left", "offset": 190},
            "paddr": {"side": "right", "offset": 30, "bus": true},
            "psel": {"side": "right", "offset": 50},
            "penable": {"side": "right", "offset": 70},
            "pwrite": {"side": "right", "offset": 90},
            "pwdata": {"side": "right", "offset": 110, "bus": true},
            "prdata": {"side": "right", "offset": 130, "bus": true},
            "pready": {"side": "right", "offset": 150}
          }
        },
        {
          "id": "sym_gpio", 
          "instance_name": "u_gpio_ctrl",
          "module_type": "cmsdk_iop_gpio",
          "position": {"x": 550, "y": 100},
          "size": {"width": 140, "height": 220},
          "orientation": "normal",
          "symbol_style": "rectangular",
          "port_positions": {
            "FCLK": {"side": "top", "offset": 20},
            "HCLK": {"side": "top", "offset": 40}, 
            "HRESETn": {"side": "top", "offset": 60},
            "i_IOSEL": {"side": "left", "offset": 30},
            "i_IOADDR": {"side": "left", "offset": 50, "bus": true},
            "i_IOWRITE": {"side": "left", "offset": 70},
            "i_IOSIZE": {"side": "left", "offset": 90, "bus": true},
            "i_IOTRANS": {"side": "left", "offset": 110},
            "i_IOWDATA": {"side": "left", "offset": 130, "bus": true},
            "ECOREVNUM": {"side": "left", "offset": 150, "bus": true},
            "PORTIN": {"side": "bottom", "offset": 30, "bus": true},
            "o_IORDATA": {"side": "right", "offset": 30, "bus": true},
            "PORTOUT": {"side": "right", "offset": 60, "bus": true},
            "PORTEN": {"side": "right", "offset": 90, "bus": true}, 
            "PORTFUNC": {"side": "right", "offset": 120, "bus": true},
            "GPIOINT": {"side": "right", "offset": 150, "bus": true},
            "o_COMBINT": {"side": "right", "offset": 180}
          }
        },
        {
          "id": "sym_irq_ctrl",
          "instance_name": "u_irq_ctrl", 
          "module_type": "interrupt_controller",
          "position": {"x": 800, "y": 200},
          "size": {"width": 120, "height": 100},
          "orientation": "normal",
          "symbol_style": "rectangular",
          "port_positions": {
            "clk": {"side": "top", "offset": 20},
            "rst_n": {"side": "top", "offset": 40},
            "irq_in": {"side": "left", "offset": 30, "bus": true},
            "irq_out": {"side": "right", "offset": 30},
            "irq_ack": {"side": "right", "offset": 50}
          }
        },
        {
          "id": "sym_led_driver",
          "instance_name": "u_led_driver",
          "module_type": "led_driver",
          "position": {"x": 750, "y": 400}, 
          "size": {"width": 120, "height": 100},
          "orientation": "normal",
          "symbol_style": "rectangular",
          "port_positions": {
            "clk": {"side": "top", "offset": 20},
            "rst_n": {"side": "top", "offset": 40},
            "gpio_data": {"side": "left", "offset": 30, "bus": true},
            "enable": {"side": "left", "offset": 50},
            "led_out": {"side": "right", "offset": 30, "bus": true}
          }
        }
      ],

      "signal_routes": [
        {
          "net_id": "net_clk_out",
          "route_type": "clock_tree",
          "style": {"color": "#2196F3", "width": 2, "pattern": "solid"},
          "segments": [
            {
              "from": {"symbol": "sym_clk_gen", "port": "clk_out"},
              "to": {"symbol": "sym_bridge", "port": "hclk"},
              "waypoints": [
                {"x": 220, "y": 220},
                {"x": 280, "y": 220}, 
                {"x": 280, "y": 170},
                {"x": 300, "y": 170}
              ]
            },
            {
              "from": {"x": 280, "y": 220},
              "to": {"symbol": "sym_gpio", "port": "HCLK"},
              "waypoints": [
                {"x": 280, "y": 140},
                {"x": 550, "y": 140}
              ]
            },
            {
              "from": {"x": 280, "y": 220}, 
              "to": {"symbol": "sym_irq_ctrl", "port": "clk"},
              "waypoints": [
                {"x": 280, "y": 380},
                {"x": 780, "y": 380},
                {"x": 780, "y": 220},
                {"x": 800, "y": 220}
              ]
            },
            {
              "from": {"x": 280, "y": 380},
              "to": {"symbol": "sym_led_driver", "port": "clk"}, 
              "waypoints": [
                {"x": 730, "y": 380},
                {"x": 730, "y": 420},
                {"x": 750, "y": 420}
              ]
            }
          ]
        },
        {
          "net_id": "net_apb_bus",
          "route_type": "bus",
          "style": {"color": "#FF9800", "width": 3, "pattern": "solid"},
          "segments": [
            {
              "from": {"symbol": "sym_bridge", "port": "paddr"},
              "to": {"symbol": "sym_gpio", "port": "i_IOADDR"},
              "waypoints": [
                {"x": 460, "y": 180},
                {"x": 520, "y": 180},
                {"x": 520, "y": 150},
                {"x": 550, "y": 150}
              ]
            }
          ]
        },
        {
          "net_id": "net_gpio_irq",
          "route_type": "point_to_point", 
          "style": {"color": "#9C27B0", "width": 2, "pattern": "solid"},
          "segments": [
            {
              "from": {"symbol": "sym_gpio", "port": "GPIOINT"},
              "to": {"symbol": "sym_irq_ctrl", "port": "irq_in"},
              "waypoints": [
                {"x": 690, "y": 250},
                {"x": 750, "y": 250},
                {"x": 750, "y": 230},
                {"x": 800, "y": 230}
              ]
            }
          ]
        },
        {
          "net_id": "net_gpio_data",
          "route_type": "point_to_point",
          "style": {"color": "#E91E63", "width": 2, "pattern": "solid"},
          "segments": [
            {
              "from": {"symbol": "sym_gpio", "port": "PORTOUT"},
              "to": {"symbol": "sym_led_driver", "port": "gpio_data"},
              "waypoints": [
                {"x": 690, "y": 160},
                {"x": 720, "y": 160},
                {"x": 720, "y": 430},
                {"x": 750, "y": 430}
              ]
            }
          ]
        }
      ],

      "layout_info": {
        "canvas_size": {"width": 1200, "height": 600},
        "grid_size": 10,
        "layout_algorithm": "hierarchical_force_directed",
        "routing_algorithm": "orthogonal_manhattan"
      }
    }
  },

  "hierarchy_tree": {
    "root": {
      "name": "gpio_demo_top",
      "type": "module",
      "children": [
        {"name": "u_clk_gen", "type": "instance", "module_type": "clk_generator"},
        {"name": "u_ahb_apb_bridge", "type": "instance", "module_type": "ahb_to_apb_bridge"},
        {"name": "u_gpio_ctrl", "type": "instance", "module_type": "cmsdk_iop_gpio"},
        {"name": "u_irq_ctrl", "type": "instance", "module_type": "interrupt_controller"},
        {"name": "u_led_driver", "type": "instance", "module_type": "led_driver"}
      ]
    },
    "navigation_state": {
      "current_view": "gpio_demo_top",
      "view_stack": ["gpio_demo_top"],
      "selected_instance": null
    }
  },

  "validation_results": {
    "connection_check": {
      "unconnected_ports": [],
      "floating_nets": [],
      "multiple_drivers": []
    },
    "timing_analysis": {
      "clock_domains": ["sys_clk", "clk_out"],
      "setup_violations": [],
      "hold_violations": []
    },
    "warnings": [
      "Unused port 'clk_div2' in module clk_generator",
      "Parameter BLINK_RATE might cause timing issues"
    ]
  }
}